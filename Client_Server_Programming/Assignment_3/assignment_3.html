<!--
Devin Hopkins
October 27th, 2020
Assignment 3
-->

<html>
<head>

<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="style.css" />

<script type="text/javascript">
getCustomerEmail = function() {
  return document.getElementById('customerEmail').value;
};

getCustomerPhone = function() {
  return document.getElementById('customerPhone').value;
};

hasValidEmail = function() {
  var emailRegex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
  var email = getCustomerEmail();

  return emailRegex.test(email);
};

hasValidPhone = function() {
  var phoneRegex = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/;
  var phone = getCustomerPhone();

  return phoneRegex.test(phone);
};

setFormAction = function() {
  document.getElementById('carRentalForm').action = 'mailto:' + getCustomerEmail();
};

beforeSubmit = function() {
  if (!hasValidEmail()) {
    alert('Your email is not valid. Please match the following format: example@gmail.com');
    return;
  } else if (!hasValidPhone()) {
    alert('Your phone number is not valid. Please be sure to only have 10 digits.');
    return;
  }

  setFormAction();

  document.getElementById('carRentalForm').submit();
};
</script>

<title>Car Rental</title>

<body class="center">
  <h1 class="blue">Car Rental</h1>

  <form class="adapt_to_above" action="" method="post" enctype="text/plain" id="carRentalForm">
    <table class="blue_alternating center">
      <thead>
        <tr>
          <th class="blue_top_row white" colspan="2">XYZ Car Rental</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th class="blue_alternating">Customer Name</th>
          <td class="blue_alternating"><input type="text" /></td>
        </tr>
        <tr>
          <th class="blue_alternating">Customer Email</th>
          <td class="blue_alternating"><input type="email" placeholder="example@gmail.com" id="customerEmail"/></td>
        </tr>
        <tr>
          <th class="blue_alternating">Customer Phone</th>
          <td class="blue_alternating"><input type="tel" placeholder="123-456-7890" id="customerPhone" /></td>
        </tr>
        <tr>
          <th class="blue_alternating">Rental Number of Days</th>
          <td class="blue_alternating"><input type="number" /></td>
        </tr>
        <tr>
          <th class="blue_alternating">Car Size</th>
          <td class="blue_alternating">
            <input type="radio" name="car_size" checked /><label>Full</label>
            <input type="radio" name="car_size" /><label>Medium</label>
            <input type="radio" name="car_size" /><label>Small</label>
          </td>
        </tr>
        <tr>
          <th></th>
          <td class="blue_alternating">
            <button type="button" onclick="beforeSubmit();">Submit</button>
            <button type="reset">Reset</button>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</body>
</head>
</html>
